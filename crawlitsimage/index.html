<!DOCTYPE html>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<title>l’Image | Crawl It’s Image</title>
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link rel="preload" as="style" href="https://fonts.googleapis.com/css2?family=Source+Serif+Pro:ital,wght@0,400;0,600;0,700;1,400;1,600;1,700&amp;display=swap" crossorigin>
<link rel="preload" as="style" href="./_observablehq/theme-air,near-midnight.css">
<link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css2?family=Source+Serif+Pro:ital,wght@0,400;0,600;0,700;1,400;1,600;1,700&amp;display=swap" crossorigin>
<link rel="stylesheet" type="text/css" href="./_observablehq/theme-air,near-midnight.css">
<link rel="modulepreload" href="./_observablehq/client.js">
<link rel="modulepreload" href="./_observablehq/runtime.js">
<link rel="modulepreload" href="./_observablehq/stdlib.js">
<link rel="stylesheet" href="./_file/style.a83f2626.css" type="text/css" media="all">
<script type="module">

import {define} from "./_observablehq/client.js";
import {registerFile} from "./_observablehq/stdlib.js";

registerFile("./data/limageinhii-0.json", {"name":"./data/limageinhii-0.json","mimeType":"application/json","path":"./_file/data/limageinhii-0.02627d57.json","lastModified":1717773657147});
registerFile("./data/supplyHTML.json", {"name":"./data/supplyHTML.json","mimeType":"application/json","path":"./_file/data/supplyHTML.6eea60dd.json","lastModified":1717797250905});

define({id: "67bf4fa5", inputs: ["FileAttachment"], outputs: ["paras","spels","displayElem","addSpans","preProc","tstamps"], body: async (FileAttachment) => {
var paras = {accented: [], normed: []};
var spels = new Map();
var displayElem = document.getElementById("display");
const addSpans = (elemHTML, spelNdx) => {
  let newText = []; // this will hold html for the new draftSpanned cell
  let text = elemHTML; // get existing HTML
  let spelStart = text.search(/\S/); // find the first nonwhitespace
  while (spelStart != -1) {
    newText.push(text.substr(0, spelStart)); // grab everything up to that point
    text = text.substr(spelStart); // put the rest in text
    let spelEnd = text.search(/\s/); // find where whitespace starts again
    if (spelEnd == -1) spelEnd = text.length; // text ends with nonwhitespace
    // wrap the spel we've found in span tags
    newText.push(`<span id="s${spelNdx}">` + text.substr(0, spelEnd) + `</span>`); // add this to newText
    text = text.substr(spelEnd); // put the rest in text
    spelStart = text.search(/\S/); // find the next nonwhitespace (if any)
  }
  return newText;
}
async function preProc() {
  // console.log("preProc"); // DEBUG
  let elems = await FileAttachment("./data/supplyHTML.json").json();
  let spelNdx = 0;
  for (var i = 0; i < elems.length; i++) {
    let innerSpels = addSpans(elems[i], spelNdx++);
    paras.accented.push(innerSpels);
    let normedSpels = []
    for (var j = 0; j < innerSpels.length; j++) {
      normedSpels.push(innerSpels[j].normalize("NFD").replace(/[\u0300-\u036f]/g, ""));
    }
    paras.normed.push(normedSpels);
    let p = document.createElement("p")
    p.setAttribute("id", i);
    p.setAttribute("class", "fade");
    p.addEventListener("mouseenter", () => p.innerHTML = paras.accented[p.id].join(" "));
    p.addEventListener("mouseleave", () => p.innerHTML = paras.normed[p.id].join(" "));
    // console.log(paras.normed); // DEBUG
    p.innerHTML = innerSpels.join(" ");
    displayElem.appendChild(p);
  }
}
preProc();
// console.log("functions defined", paras); // DEBUG
const tstamps = await FileAttachment("./data/limageinhii-0.json").json();
return {paras,spels,displayElem,addSpans,preProc,tstamps};
}});

</script>
<div id="observablehq-center">
<main id="observablehq-main" class="observablehq">
<div id="cell-67bf4fa5" class="observablehq observablehq--block"></div>
<h2 style="margin-top: 3vw;">&nbsp;‘<span style="color: black;">l’Image</span>’ in <em>How It Is</em></h2>
<div id="display"></div></main>
</div>

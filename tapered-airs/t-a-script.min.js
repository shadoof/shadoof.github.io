g=[],k="⏹",m="⏵",c=[],z=1,i=(e=>document.querySelector("#"+e)),ii=((e,a)=>e.addEventListener("input",a)),b=i("b"),d=i("d"),x=i("x"),n=x.value,ii(x,()=>n=x.value),y=i("y"),f=y.value,ii(y,()=>{f=y.value,a()}),yy=i("f"),ff=yy.value,ii(yy,()=>{ff=yy.value}),
t=((e,a,i)=>{let t=e.match(/[aeiouy,:;\.\?]/gi);t&&(g[a]=(300+150*t.length)/f),a-1>-1&&(g[a-1]+=75*i.length/f)}),
r=(e=>new Promise(a=>setTimeout(a,e))),
v=(e=>e.classList.remove("i")),u=(e=>e.classList.add("i")),
a=(()=>{let e="",a=0,i=n,r=i.search(/\S/);for(;-1!=r;){let s=i.substr(0,r);e+=s,i=i.substr(r),l=i.search(/\s/),-1==l&&(l=i.length),w=i.substr(0,l),e+=`<span>${w}</span>`,t(w,a++,s),i=i.substr(l),r=i.search(/\S/)}d.innerHTML=e}),
a(),
p=(async()=>{x.style.display="none",c=Array.from(d.children),c.forEach(e=>u(e)),await r(2e3);for(const[e,a]of c.entries()){if(0==z)break;v(a),ff>0&&new Promise(()=>setTimeout(()=>u(a),700*ff/f)),await r(g[e])}1==z&&await r(7e3),c.forEach(e=>u(e)),1==z&&await r(3e3),x.style.display="block",b.value=m}),
p(),
q=(()=>{if(b.value==m)return z=1,b.value=k,void p();z=0,c.forEach(e=>u(e)),b.value=m});